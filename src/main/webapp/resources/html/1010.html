<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>10월10문제</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
	$(document).ready(function(){
		var i = 1; // 순서의 값을 사용하기 위해 초기값을 1로 지정합니다.
		$("#submit").on("click", function(){ //내용추가 버튼을 클릭시 이벤트 실행하는 함수
			var text = $("#text").val(); // 입력하세요.라고 하는 input 내용의 값을 text 변수에 담아 놓기 위한 부분
			var tag = '<tr>' +
			            '<td><input type="checkbox"></td>' +
			            '<td>' + i + '</td>' +
			      		'<td>' + text + '</td>' +
			      		'<td><button type="button">삭제</button> </td>' +
			    	  '</tr>';
			i++; //순서값을 증가
			$("#text").val(""); //입력하세요.라고 하는 input 내용의 값을 초기화 시키기 위한 부분
			$("tbody").prepend(tag); // tbody 태그에 tag 변수에 저장된 값을 추가해줌
			
			$("tbody input:checkbox").off(); // 이전 이벤트를 종료 하기 위한 부분
			$("tbody input:checkbox").on("click", function(){
				var index = $("tbody input:checkbox").index(this); //this를 사용하여 주소값을 index 변수에 저장함
				var tr = $("tbody tr").eq(index); //해당 되는 tr의 전체 객체를 가져 오기 위한 변수
				var tds = tr.find("td"); //tr 객체 속에 있는 태그의 td태그들를 가져 오기 위한 부분
				var text = ""; //text 값을 초기화시켜주고
				if($(this).prop('checked')){ //체크박스에 체크되있으면
					text = tds.eq(2).text(); //한줄평의 내용을 text 변수에 저장하기 위한 부분
					tds.eq(2).html("<input type='text' value='" + text + "'>");
					// 한줄평의 내용 부분를 입력 받을 수 있는 input 박스를 넣고 value 값으로 text 변수를 대입해 주는 부분
				}else{ //체크를 풀었을때
					text = tds.eq(2).find("input").val(); //한줄평의 내용부분의 input 박스의 값을 text 변수에 담기 위한 부분
					tds.eq(2).text(text); //text 변수의 값을 한줄평의 위치에 내용으로 변경 하기 위한 부분 (input 박스는 삭제 됩니다.)
				}
			});
			
			$("tbody button").off();
			$("tbody button").on("click", function(){ // tbody 태그에 있는 button을 클릭했을때
				var index = $("tbody button").index(this); //주소값을 this를 사용해서 찾아주고
				$("tbody tr").eq(index).remove(); //해당 주소에 맞는 tr 태그를 삭제시켜준다.
			});
		});
	});
</script>
</head>
<body>
<div class="container">
	<form>
	  <div class="form-group row">
	    <div class="col-xs-1">
	    	<label for="text">한줄평 :</label>
	    </div>
	    <div class="col-xs-9">
	    	<input type="text" class="form-control" id="text" name="text" placeholder="입력하세요.">
	    </div>
	    <div class="col-xs-2">
	    	<button type="button" class="btn btn-default" id="submit">내용 추가</button>
	    </div>
	  </div>
	</form>
</div>
<div class="container">
	<table class="table">
	  <thead>
	    <tr>
	      <th>선택</th>
	      <th>번호</th>
	      <th>한줄평</th>
	      <th>삭제</th>
	    </tr>
	  </thead>
	  <tbody>
<!-- 	    <tr> -->
<!-- 	      <td><input type="checkbox"> </td> -->
<!-- 	      <td>1</td> -->
<!-- 	      <td>JQuery 너무 어렵 ;)</td> -->
<!-- 	      <td><button type="button">삭제</button> </td> -->
<!-- 	    </tr> -->
	  </tbody>
	</table>
</div>
</body>
</html>